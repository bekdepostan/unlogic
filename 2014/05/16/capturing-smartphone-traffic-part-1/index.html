<!DOCTYPE html>
<html lang="en">
<head>
		<title>Unlogic &mdash; Capturing smartphone traffic - Part 1</title>
		<meta charset="utf-8" />
		<link rel="profile" href="http://gmpg.org/xfn/11" />
		<link rel="stylesheet" type="text/css" href="http://unlogic.co.uk/theme/css/style.css" />
        <link rel="stylesheet" type="text/css" href="http://unlogic.co.uk/theme/css/pygments.css" />
		<link rel='stylesheet' id='oswald-css'  href='http://fonts.googleapis.com/css?family=Oswald&#038;ver=3.3.2' type='text/css' media='all' />
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
        <link href='https://fonts.googleapis.com/css?family=Cousine' rel='stylesheet' type='text/css'>
		<style type="text/css">
			body.custom-background { background-color: #f5f5f5; }
		</style>
		<link rel="alternate" type="application/atom+xml"
			title="Unlogic — Flux Atom"
			href="http://unlogic.co.uk/" /> 
		<link rel ="alternate" type="application/rss+xml"
			title="Unlogic — Flux RSS"
			href="http://unlogic.co.uk/rss.xml" /> 
		<!--[if lte IE 8]><script src="http://unlogic.co.uk/theme/js/html5shiv.js"></script><![endif]-->
</head>

<body class="home blog custom-background single-author" >
	<div id="container">
		<div id="header">
				<h1 id="site-title"><a href="http://unlogic.co.uk/">Unlogic</a></h1>
<h2 id="site-description">I've got a keyboard, a terminal, and a whole load of luck</h2>		</div><!-- /#banner -->
		
		<div id="menu">
            <div class="menu-social-container">
                <ul id="menu-social" class="social">
                    <li><a href="https://kaybase.io/svenito" title="Keybase"><i class="fa fa-key fa-1x"></i></a></li>
                    <li><a href="https://twitter.com/binaryheadache" title="Twitter"><i class="fa fa-twitter fa-1x"></i></a></li>
                    <li><a href="https://github.com/svenito" title="Github"><i class="fa fa-github fa-1x"></i></a></li>
                    <li><a href="http://unlogic.co.uk/feed.xml" title="RSS Feed"><i class="fa fa-rss fa-1x"></i></a></li>
                </ul>
            </div>
			<div class="menu-navigation-container">
                
                <ul id="menu-navigation" class="menu">
						<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="http://unlogic.co.uk/pages/all-posts.html">All posts</a></li>

				</ul>
			</div> <!--/#menu-navigation-container-->
            <div style="clear: both;"></div>
		</div><!-- /#menu -->
		
		<div class="page-title">
		</div>
	
		<div id="contents">

<div class="post type-post status-publish format-standard hentry category-general" id="post">
	<div class="entry-meta">
		<div class="date"><a href="http://unlogic.co.uk/2014/05/16/capturing-smartphone-traffic-part-1/">Fri 16 May 2014</a></div>
			<div class="comments"><a href="http://unlogic.co.uk/2014/05/16/capturing-smartphone-traffic-part-1/#disqus_thread" title="Comment on Capturing smartphone traffic - Part 1">comments</a></div>
	</div> <!-- /#entry-meta -->
	<div class="main">
		<h2 class="entry-title">
			<a href="http://unlogic.co.uk/2014/05/16/capturing-smartphone-traffic-part-1/" title="Permalink to Capturing smartphone traffic - Part 1" rel="bookmark">Capturing smartphone traffic - Part 1</a>
		</h2>
		<div class="entry-content">
			<p>We all carry phones around that are connected to some of network at all times.
Unless you are the truly paranoid or battery saving type, then there will be periods
when your phone is dark.</p>
<p>But even so, I often wonder what my phone is transmitting when I'm not using it,
or even when I am using it. So in this series I plan on doing some investigation
into what goes in and out of my phone.</p>
<p>In this post I'll just set up all the bits and pieces to start the monitoring
process and run a quick check to make sure everything works. In the following
parts I'll be taking a look at some common apps and their network chatter. The
idea is to analyse the data and understand their communications. Hopefully we'll
also unearth some interesting things along the way.</p>
<div class="section" id="what-we-ll-need">
<h2>What we'll need</h2>
<ul class="simple">
<li>A smartphone</li>
<li>A laptop (or similar) to turn into a wireless access point</li>
<li><a class="reference external" href="https://www.wireshark.org/">Wireshark</a> running on that laptop</li>
<li>An internet connection</li>
</ul>
</div>
<div class="section" id="setting-up-the-wireless-access-point">
<h2>Setting up the wireless access point</h2>
<p>I'm going to cover how to do this part in OSX for now. If I get round
to it I'll add a Linux way to do it too.</p>
<div class="section" id="osx">
<h3>OSX</h3>
<p>First connect the laptop to an ethernet connection. You can't be connected to
a wireless network and create a wireless access point at the same time.
So we will connect to the internet via ethernet and use the wireless radio
for the access point. Once the ethernet connection is up and running, open
<em>System Preferences -&gt; Sharing</em>. In the list click on the <em>Internet sharing</em>
entry (not the check box) and select <em>Ethernet</em> in the <em>Share your connection
from</em> dropdown. In the <em>To computers using</em> select <em>Wi-Fi</em>. Now select the
check box next to <em>Internet Sharing</em> to turn sharing on.</p>
<a class="reference external image-reference" href="http://i.imgur.com/K2Zeyoy.png"><img alt="" src="http://i.imgur.com/K2Zeyoy.png" style="width: 400px;" /></a>
<p>If everything went to plan your Wi-Fi indicator should now look like this:</p>
<a class="reference external image-reference" href="http://i.imgur.com/ecXJUc8.png"><img alt="" src="http://i.imgur.com/ecXJUc8.png" style="width: 400px;" /></a>
</div>
</div>
<div class="section" id="connect-the-phone">
<h2>Connect the phone</h2>
<p>Now we connect tbe phone to the new access point. Go to your wireless network
settings and select the name of the network we created. <strong>slaptop</strong> in my case.
Once do we need to</p>
</div>
<div class="section" id="start-wireshark">
<h2>Start Wireshark</h2>
<p>Fireup Wireshark and then select the capture interface. The default will be
eth0 usually. That's the ethernet port, but we want to capture traffic on the
wireless access point. So we need to select <em>en1</em> (in my case). It's the one
with the wireless icon next to it.</p>
<a class="reference external image-reference" href="http://i.imgur.com/9wyI6s6.png"><img alt="" src="http://i.imgur.com/9wyI6s6.png" style="width: 400px;" /></a>
<p>Once this is done we'll want to filter out ARP packets as these are of little
interest and there will be quite a few of them. See the screenshot below to
see where to set this.</p>
<p>Now we press the <em>Capture</em> button to begin bapturing traffic. Once running we
can check to see if it's working by browsing to a site. I chose this site at
<code>192.30.252.153</code>. You should see the capture window scroll past with some
traffic going between your phone ip and the site your browsed to.</p>
<a class="reference external image-reference" href="http://i.imgur.com/XjFuoOQ.png"><img alt="" src="http://i.imgur.com/XjFuoOQ.png" style="width: 400px;" /></a>
</div>
<div class="section" id="in-the-next-post">
<h2>In the next post</h2>
<p>So I'm all set to capture any and all traffic now that goes to and from my phone.
With this I can now open various apps and see what traffic they generate. In
the next posts I plan to see what idle traffic there is (no apps being actively
used) and what traffic some common apps generate. If I'm lucky I might even
discover some interesting things about some apps.</p>
<p>Stay tuned for part 2.</p>
</div>

		</div> <!--/#entry-content-->
	</div> <!--/#main-->
</div>  <!--/#post-->
	<div id="comments">
		<div id="respond">
			<div id="disqus_thread"></div>
	        <script type="text/javascript">
	            var disqus_shortname = 'unlogic';
	
	            /* * * DON'T EDIT BELOW THIS LINE * * */
	            (function() {
	                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	                dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
	                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	            })();
	        </script>
	        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
	        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
		</div><!-- #respond -->					
</div><!-- #comments -->

		</div>
		
		<div id="footer">
			<p><p>Powered by <a href="http://getpelican.com">Pelican</a></p>
<script type="text/javascript">
    var disqus_shortname = 'unlogic';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>		</div><!-- /#footer -->
	</div><!-- /#container -->
	<div style="display:none"></div>
</body>
</html>