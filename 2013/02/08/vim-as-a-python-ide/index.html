<!DOCTYPE html>
<html lang="en">
<head>
		<title>Unlogic &mdash; Vim as a Python IDE</title>
		<meta charset="utf-8" />
		<link rel="profile" href="http://gmpg.org/xfn/11" />
		<link rel="stylesheet" type="text/css" href="http://unlogic.co.uk/theme/css/style.css" />
        <link rel="stylesheet" type="text/css" href="http://unlogic.co.uk/theme/css/pygments.css" />
		<link rel='stylesheet' id='oswald-css'  href='http://fonts.googleapis.com/css?family=Oswald&#038;ver=3.3.2' type='text/css' media='all' />
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
        <link href='https://fonts.googleapis.com/css?family=Cousine' rel='stylesheet' type='text/css'>
		<style type="text/css">
			body.custom-background { background-color: #f5f5f5; }
		</style>
		<link rel="alternate" type="application/atom+xml"
			title="Unlogic — Flux Atom"
			href="http://unlogic.co.uk/" /> 
		<link rel ="alternate" type="application/rss+xml"
			title="Unlogic — Flux RSS"
			href="http://unlogic.co.uk/rss.xml" /> 
		<!--[if lte IE 8]><script src="http://unlogic.co.uk/theme/js/html5shiv.js"></script><![endif]-->
</head>

<body class="home blog custom-background single-author" >
	<div id="container">
		<div id="header">
				<h1 id="site-title"><a href="http://unlogic.co.uk/">Unlogic</a></h1>
<h2 id="site-description">I've got a keyboard, a terminal, and a whole load of luck</h2>		</div><!-- /#banner -->
		
		<div id="menu">
            <div class="menu-social-container">
                <ul id="menu-social" class="social">
                    <li><a href="https://kaybase.io/svenito" title="Keybase"><i class="fa fa-key fa-1x"></i></a></li>
                    <li><a href="https://twitter.com/binaryheadache" title="Twitter"><i class="fa fa-twitter fa-1x"></i></a></li>
                    <li><a href="https://github.com/svenito" title="Github"><i class="fa fa-github fa-1x"></i></a></li>
                    <li><a href="http://unlogic.co.uk/feed.xml" title="RSS Feed"><i class="fa fa-rss fa-1x"></i></a></li>
                </ul>
            </div>
			<div class="menu-navigation-container">
                
                <ul id="menu-navigation" class="menu">
						<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="http://unlogic.co.uk/pages/all-posts.html">All posts</a></li>

				</ul>
			</div> <!--/#menu-navigation-container-->
            <div style="clear: both;"></div>
		</div><!-- /#menu -->
		
		<div class="page-title">
		</div>
	
		<div id="contents">

<div class="post type-post status-publish format-standard hentry category-general" id="post">
	<div class="entry-meta">
		<div class="date"><a href="http://unlogic.co.uk/2013/02/08/vim-as-a-python-ide/">Fri 08 February 2013</a></div>
			<div class="comments"><a href="http://unlogic.co.uk/2013/02/08/vim-as-a-python-ide/#disqus_thread" title="Comment on Vim as a Python IDE">comments</a></div>
	</div> <!-- /#entry-meta -->
	<div class="main">
		<h2 class="entry-title">
			<a href="http://unlogic.co.uk/2013/02/08/vim-as-a-python-ide/" title="Permalink to Vim as a Python IDE" rel="bookmark">Vim as a Python IDE</a>
		</h2>
		<div class="entry-content">
			<p>I've been spending quite a bit of time with our good old buddy Python recently, and when
I do, I always invite along our mutual friend Vim. He's a barrell of laughs and always
knows of a quicker way to do things. So I've been getting the two acquainted more and more
and Vim's turned into a totally different person. So I am going to share with you how
I setup Vim as my tool of choice when working with Python code. It's by no means the
definitive way of working, but it works for me. I know there's quite a few posts similar to this one,
but these are the tools <strong>I</strong> find useful and use. If you have some suggestions, comments, or
know of additional tools that might be useful, I would like to hear about them in the comments
below.</p>
<p>If you are a Vim user you might find this useful. If you are new to Vim I suggest spending some
time with it before installing any plugins. That way you get used to how Vim works out of the box.
Once you're comfortable with using it, and you've gotten to grips with the Vim-way, go ahead and
install some extras.</p>
<p>Right, let's get started.</p>
<p>First and foremost you should install <a class="reference external" href="https://github.com/gmarik/vundle">Vundle</a>. Vundle will
make installing and updating all the other tools much easier. It's basically pathogen with a lot
of nice extras, like installing the bundles itself from their Github repos (and other sources).
For more info see the README in the Github repo. To install follow the instructions from the repo,
which are repeated below:</p>
<pre class="code bash literal-block">
git clone https://github.com/gmarik/vundle.git ~/.vim/bundle/vundle
</pre>
<p>thenadd the following to your :code:<tt class="docutils literal">.vimrc</tt></p>
<pre class="code vim literal-block">
<span class="k">set</span> <span class="nb">nocompatible</span>
<span class="k">filetype</span> off

<span class="k">set</span> <span class="nb">rtp</span><span class="p">+=~</span><span class="sr">/.vim/</span>bundle<span class="sr">/vundle/</span>
<span class="k">call</span> vundle#rc<span class="p">()</span>
<span class="c">
&quot; let Vundle manage Vundle</span>
<span class="c">&quot; required!</span>
Bundle <span class="s1">'gmarik/vundle'</span>
<span class="c">
&quot; The bundles you install will be listed here</span>

<span class="k">filetype</span> plugin indent <span class="k">on</span>
<span class="c">
&quot; The rest of your config follows here</span>
</pre>
<p>Now if you launch Vim and run the command</p>
<pre class="code vim literal-block">
<span class="p">:</span>BundleList
</pre>
<p>a new split should appear listing the Vundle bundle. Everything went ok in that case.</p>
<p>As you go through this article you can install each item separately or you can add the bundles
to your :code:<tt class="docutils literal">.vimrc</tt> one by one and then just install them all at once at the end if you prefer.</p>
<p>Ok, so having done that let's configure a few more things.</p>
<div class="section" id="highlight-excess-line-length">
<h2>Highlight excess line length</h2>
<p>You'll probably want to set a restriction to line width for python files. I like to set this to 120
chars. 80 chars is usually the standard, but with modern displays we can allow ourselves a few more,
but you are free to adjust as you like. To enable this excess highlighting, add the following lines
to your :code:<tt class="docutils literal">.vimrc</tt></p>
<pre class="code vim literal-block">
augroup vimrc_autocmds
    autocmd<span class="p">!</span>
<span class="c">    &quot; highlight characters past column 120</span>
    autocmd <span class="nb">FileType</span> python <span class="nb">highlight</span> Excess ctermbg<span class="p">=</span>DarkGrey guibg<span class="p">=</span>Black
    autocmd <span class="nb">FileType</span> python <span class="k">match</span> Excess <span class="sr">/\%120v.*/</span>
    autocmd <span class="nb">FileType</span> python <span class="k">set</span> <span class="nb">nowrap</span>
    augroup END
</pre>
<p>Anything that exceeds the line length will be highlighted black, feel free to change this colour
to suit your colourscheme. It also turns off line wrapping for python files.</p>
</div>
<div class="section" id="powerline">
<h2>Powerline</h2>
<p>Next up we install <a class="reference external" href="https://github.com/Lokaltog/powerline">Powerline</a> which looks like this:</p>
<a class="reference external image-reference" href="/images/powerline.png"><img alt="" src="/images/powerline.png" style="width: 500px;" /></a>
<p>It shows you your current mode (NORMAL), the current branch in Git, the file you are editing and some other
useful information.</p>
<p>Simply add:</p>
<pre class="code vim literal-block">
Bundle <span class="s1">'Lokaltog/powerline'</span><span class="p">,</span> {<span class="s1">'rtp'</span>: <span class="s1">'powerline/bindings/vim/'</span>}
</pre>
<p>to your :code:<tt class="docutils literal"><span class="pre">.vimrc`:code:`</span> below the comment we added earlier <span class="pre">`:code:`&quot;</span> The bundles you install will be listed here</tt>. Restart Vim
and run :code:<tt class="docutils literal">:BundleList</tt> again. Now you should also see the Powerline bundle listed there. To install it run the command</p>
<pre class="code vim literal-block">
<span class="p">:</span>BundleInstall
</pre>
<p>You'll see Vundle process the list and report on the status of the installation. Hopefully everything went ok.</p>
<p>Powerline however does require a few more things, most notably patched fonts to display the special characters it uses.
You can get pre-patched fonts from <a class="reference external" href="https://github.com/Lokaltog/powerline-fonts">the powerline-fonts repo</a>. If your
font isn't listed then the powerline repo does provide a font-patcher you can use to try and patch your font. How this
is done however is outside the scope of this article. To select your font and ensure that Powerline is always shown,
you will also need to add these two lines to your :code:<tt class="docutils literal">.vimrc</tt></p>
<pre class="code vim literal-block">
<span class="c">&quot; Powerline setup</span>
<span class="k">set</span> <span class="nb">guifont</span><span class="p">=</span>DejaVu\ Sans\ Mono\ <span class="k">for</span>\ Powerline\ <span class="m">9</span>
<span class="k">set</span> <span class="nb">laststatus</span><span class="p">=</span><span class="m">2</span>
</pre>
<p>:code:<tt class="docutils literal">laststatus</tt> ensures that Powerline shows up even if you don't have any splits.</p>
<p>Restart vim and hopefully you'll see your powerline appear at the bottom of you window.</p>
<p>Please note that this version of Powerline is a Python based version and thus requires your Vim to  be built
with Python enabled. To check if it is run:</p>
<pre class="code bash literal-block">
$&gt; vim --version <span class="p">|</span> grep -i python
</pre>
<p>from the commandline. If you see :code:<tt class="docutils literal">+python</tt> then you are ok. There is
<a class="reference external" href="https://github.com/Lokaltog/vim-powerline">another Powerline</a> that is a native Vim plugin should
you not have Python enabled or prefer to use it over the Python version.</p>
</div>
<div class="section" id="fugitive">
<h2>Fugitive</h2>
<p><a class="reference external" href="http://git-scm.com/">Fugitive &lt;https://github.com/tpope/vim-fugitive) is a `Git</a> plugin. It basically wraps
most Git commands so that you can call them from inside Vim. They are prefixed with <code>G</code>, for example <code>Gcommit</code>
For example it allows you to stage files directly from Vim and make the commit. It also leverages VimDiff to perform
conflict resolution, blame and the like. There's a whole set of screencasts on how to use it available from
<a class="reference external" href="http://vimcasts.org/episodes/fugitive-vim---a-complement-to-command-line-git/">Vim Casts</a> which I recommend watching.</p>
<p>To install Fugitive, add its bundle to Vundle:</p>
<pre class="code vim literal-block">
Bundle <span class="s1">'tpope/vim-fugitive'</span>
</pre>
<p>Run :code:<tt class="docutils literal">:BundleInstall</tt> again to install it.</p>
</div>
<div class="section" id="nerdtree">
<h2>NerdTree</h2>
<p><a class="reference external" href="https://github.com/scrooloose/nerdtree">NerdTree</a> is a filebrowser that pops up in a
split when you need it and features a tree like file browser (hence the  <em>tree</em> part in the name).
It looks somewhat like this:</p>
<img alt="" src="/images/nerdtree.png" />
<p>As usual you just need to add its package to Vundle:</p>
<pre class="code vim literal-block">
Bundle <span class="s1">'scrooloose/nerdtree'</span>
</pre>
<p>and <code>:BundleInstall</code> once you restart Vim. To activate with <code>F2</code> add the following to <code>.vimrc</code>:</p>
<pre class="code vim literal-block">
map <span class="p">&lt;</span>F2<span class="p">&gt;</span> :NERDTreeToggle<span class="p">&lt;</span>CR<span class="p">&gt;</span>
</pre>
<p>Press <code>F2</code> in vim and it will take you to the current working directory. Press <code>?</code> to see NerdTree's
list of commands.</p>
</div>
<div class="section" id="python-mode">
<h2>Python mode</h2>
<p>This is the big one. It basically adds all the Python functionality you could ever want in Vim. Things like Lint,
codecompletion, documentation lookup, jump to classes, refactoring tools etc. You'll find it in
<a class="reference external" href="https://github.com/klen/python-mode">Python-mode</a></p>
<p>Its bundle is:</p>
<pre class="code vim literal-block">
Bundle <span class="s1">'klen/python-mode'</span>
</pre>
<p>Again, <code>:BundleInstall</code> to install it and then we probably want to configure some items. There's a lot to
configure, so if you want the complete picture I suggest you head over to the
<a class="reference external" href="https://github.com/klen/python-mode">Github repo</a> and read the more complete docs,
or run <code>:help python-mode</code> from inside Vim.</p>
<p>I found the following settings most useful personally, but you might want to tweak some settings to suit your needs
and workflow. The following a copy-paste from my .vimrc. The keyboard shortcuts in the comments are the ones I find
most useful and I keep them there for reference:</p>
<pre class="code vim literal-block">
<span class="c">&quot; Python-mode</span>
<span class="c">&quot; Activate rope</span>
<span class="c">&quot; Keys:</span>
<span class="c">&quot; K             Show python docs</span>
<span class="c">&quot; &lt;Ctrl-Space&gt;  Rope autocomplete</span>
<span class="c">&quot; &lt;Ctrl-c&gt;g     Rope goto definition</span>
<span class="c">&quot; &lt;Ctrl-c&gt;d     Rope show documentation</span>
<span class="c">&quot; &lt;Ctrl-c&gt;f     Rope find occurrences</span>
<span class="c">&quot; &lt;Leader&gt;b     Set, unset breakpoint (g:pymode_breakpoint enabled)</span>
<span class="c">&quot; [[            Jump on previous class or function (normal, visual, operator modes)</span>
<span class="c">&quot; ]]            Jump on next class or function (normal, visual, operator modes)</span>
<span class="c">&quot; [M            Jump on previous class or method (normal, visual, operator modes)</span>
<span class="c">&quot; ]M            Jump on next class or method (normal, visual, operator modes)</span>
<span class="k">let</span> <span class="k">g</span>:pymode_rope <span class="p">=</span> <span class="m">1</span>
<span class="c">
&quot; Documentation</span>
<span class="k">let</span> <span class="k">g</span>:pymode_doc <span class="p">=</span> <span class="m">1</span>
<span class="k">let</span> <span class="k">g</span>:pymode_doc_key <span class="p">=</span> <span class="s1">'K'</span>
<span class="c">
&quot;Linting</span>
<span class="k">let</span> <span class="k">g</span>:pymode_lint <span class="p">=</span> <span class="m">1</span>
<span class="k">let</span> <span class="k">g</span>:pymode_lint_checker <span class="p">=</span> <span class="s2">&quot;pyflakes,pep8&quot;</span>
<span class="c">&quot; Auto check on save</span>
<span class="k">let</span> <span class="k">g</span>:pymode_lint_write <span class="p">=</span> <span class="m">1</span>
<span class="c">
&quot; Support virtualenv</span>
<span class="k">let</span> <span class="k">g</span>:pymode_virtualenv <span class="p">=</span> <span class="m">1</span>
<span class="c">
&quot; Enable breakpoints plugin</span>
<span class="k">let</span> <span class="k">g</span>:pymode_breakpoint <span class="p">=</span> <span class="m">1</span>
<span class="k">let</span> <span class="k">g</span>:pymode_breakpoint_bind <span class="p">=</span> <span class="s1">'&lt;leader&gt;b'</span>
<span class="c">
&quot; syntax highlighting</span>
<span class="k">let</span> <span class="k">g</span>:pymode_syntax <span class="p">=</span> <span class="m">1</span>
<span class="k">let</span> <span class="k">g</span>:pymode_syntax_all <span class="p">=</span> <span class="m">1</span>
<span class="k">let</span> <span class="k">g</span>:pymode_syntax_indent_errors <span class="p">=</span> <span class="k">g</span>:pymode_syntax_all
<span class="k">let</span> <span class="k">g</span>:pymode_syntax_space_errors <span class="p">=</span> <span class="k">g</span>:pymode_syntax_all
<span class="c">
&quot; Don't autofold code</span>
<span class="k">let</span> <span class="k">g</span>:pymode_folding <span class="p">=</span> <span class="m">0</span>
</pre>
<p>To explain the above a bit, here's what it does:</p>
<ul class="simple">
<li>Allow me to look up Python docs by pressing <code>K</code></li>
<li>Automatically check my code on each save, but only use <code>PyLint</code> or <code>PyFlakes</code></li>
<li>Support virtualenv</li>
<li>Use <code>&lt;leader&gt;b</code> to add a pdb shortcut (inserts <code>import pdb; pdb.set_trace() # XXX BREAKPOINT</code> into your code</li>
<li>Enhanced syntax highlighting and formatting</li>
</ul>
<p>As I said, please read the full docs and adjust the settings as you see fit.</p>
</div>
<div class="section" id="jedi-vim">
<h2>Jedi vim</h2>
<p>Since I wrote this article I have discovered <a class="reference external" href="https://github.com/davidhalter/jedi-vim">Jedi-vim</a>
which I now use as the autocompletion tool instead of the rope plugin that comes with Python Mode. All you need to do is
add the plugin to the vundle list and turn off Rope by replacing the <code>let g:pymode_rope = 1</code> with
<code>let g:pymode_rope = 0</code>. I feel it's snappier and more capable than Rope. But if you want to avoid
installing another plugin, then feel free to stay with Rope.</p>
</div>
<div class="section" id="other-settings">
<h2>Other settings</h2>
<p>I also use some specific Vim settings in <code>.vimrc</code> that make the experience a bit nicer for me:</p>
<pre class="code vim literal-block">
<span class="c">&quot; Use &lt;leader&gt;l to toggle display of whitespace</span>
nmap <span class="p">&lt;</span>leader<span class="p">&gt;</span><span class="k">l</span> :<span class="k">set</span> <span class="nb">list</span><span class="p">!&lt;</span>CR<span class="p">&gt;</span>
<span class="c">&quot; automatically change window's cwd to file's dir</span>
<span class="k">set</span> <span class="nb">autochdir</span>
<span class="c">
&quot; I'm prefer spaces to tabs</span>
<span class="k">set</span> <span class="nb">tabstop</span><span class="p">=</span><span class="m">4</span>
<span class="k">set</span> <span class="nb">shiftwidth</span><span class="p">=</span><span class="m">4</span>
<span class="k">set</span> <span class="nb">expandtab</span>
<span class="c">
&quot; more subtle popup colors</span>
<span class="k">if</span> has <span class="p">(</span><span class="s1">'gui_running'</span><span class="p">)</span>
    <span class="nb">highlight</span> Pmenu guibg<span class="p">=</span><span class="mh">#cccccc</span> <span class="k">gui</span><span class="p">=</span><span class="nb">bold</span>
<span class="k">endif</span>
</pre>
</div>
<div class="section" id="summary">
<h2>Summary</h2>
<p>This is basically the crux of my Python and Vim development setup. I think the core of the whole thing really is
python mode as it provides the most Python specific tools. The other plugins however do add some really useful
functionality to make your life a little easier. You might ask why I don't list things like <code>fuzzy file search</code>
and such, and that's because I don't use it. I've tried it before and didn't really get on with it very well and I
prefer to either just open the files directly or using <code>NerdTree</code>.</p>
<p>I hope that this post provides some pointers to help you setup your Vim based Python development environment. As
I said above, feel free to leave a comment with any plugins or settings that you find useful, always happy to hear
about what else is out there.</p>
<p>Thanks for reading.</p>
</div>

		</div> <!--/#entry-content-->
	</div> <!--/#main-->
</div>  <!--/#post-->
	<div id="comments">
		<div id="respond">
			<div id="disqus_thread"></div>
	        <script type="text/javascript">
	            var disqus_shortname = 'unlogic';
	
	            /* * * DON'T EDIT BELOW THIS LINE * * */
	            (function() {
	                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	                dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
	                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	            })();
	        </script>
	        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
	        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
		</div><!-- #respond -->					
</div><!-- #comments -->

		</div>
		
		<div id="footer">
			<p><p>Powered by <a href="http://getpelican.com">Pelican</a></p>
<script type="text/javascript">
    var disqus_shortname = 'unlogic';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>		</div><!-- /#footer -->
	</div><!-- /#container -->
	<div style="display:none"></div>
</body>
</html>