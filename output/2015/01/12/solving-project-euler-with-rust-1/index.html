<!DOCTYPE html>
<html lang="en">

<head>
            <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="">
        <meta name="author" content="Sven Steinbauer">


        <title>"Solving Project Euler with Rust 1"</title>

        <!-- Bootstrap Core CSS -->
        <link href="/theme/css/bootstrap.min.css" rel="stylesheet">

        <!-- Custom CSS -->
        <link href="/theme/css/clean-blog.min.css" rel="stylesheet">

        <!-- Code highlight color scheme -->
            <link href="/theme/css/code_blocks/monokai.css" rel="stylesheet">


        <!-- Custom Fonts -->
        <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
        <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->



        <meta name="description" content="It's time to poke at Rust a little bit. And what better way to get acquainted with a new language than to solve some problems with it? ...">

        <meta name="author" content="Sven Steinbauer">

        <meta name="tags" content="[rust">
        <meta name="tags" content="project euler">
        <meta name="tags" content="programming">
        <meta name="tags" content="learning]">

	                <meta property="og:locale" content="">
		<meta property="og:site_name" content="Unlogic">

	<meta property="og:type" content="article">
            <meta property="article:author" content="Sven Steinbauer" >
	<meta property="og:url" content="/2015/01/12/solving-project-euler-with-rust-1/">
	<meta property="og:title" content=""Solving Project Euler with Rust 1"">
	<meta property="article:published_time" content="2015-01-12 00:00:00+00:00">
            <meta property="og:description" content="It's time to poke at Rust a little bit. And what better way to get acquainted with a new language than to solve some problems with it? ...">

            <meta property="og:image" content="/images/keyboard-feature.jpg">
</head>

<body>

    <!-- Navigation -->
    <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="/">Unlogic</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">

                            <li><a href="/pages/about.html">About</a></li>
                            <li><a href="/pages/all-posts.html">All posts</a></li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

    <!-- Page Header -->
    <header class="intro-header" style="background-image: url('/images/keyboard-feature.jpg')">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <div class="post-heading">
                        <h1>"Solving Project Euler with Rust 1"</h1>
                        <span class="meta">Posted by
                                <a href="/author/sven-steinbauer.html">Sven Steinbauer</a>
                             on Mon 12 January 2015
                        </span>
                            <span class="meta">Updated on Tue 13 January 2015</span>
                        
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
    <!-- Post Content -->
    <article>
        <p>It's time to poke at <a href="http://www.rust-lang.org/">Rust</a> a little bit. And what
better way to get acquainted with a new language than to solve
some problems with it? And seeing as there's not always a suitably
simple problem handy, I've picked some problems from <a href="https://projecteuler.net">Project Euler</a>
to tackle. I am using Rust 1.0.0Alpha in this post.</p>
<p>The first problem is:</p>
<div class="highlight"><pre><span></span>Multiples of 3 and 5
Problem 1
If we list all the natural numbers below 10 that are multiples of 3 or 5, 
we get 3, 5, 6 and 9. The sum of these multiples is 23.

Find the sum of all the multiples of 3 or 5 below 1000.
</pre></div>


<p>Ok, so sounds fairly ok and I'm going to add another requirement: To prompt the 
user for the max number (in this case the 1000). Just a little extra exercise. I've
read the <a href="http://rustbyexample.com/">Rust By Example</a> pages and the new and official
<a href="http://doc.rust-lang.org/1.0.0-alpha/book">Rust book</a> and let's see how we get on.</p>
<p>First let's define some structure:</p>
<p>{% highlight rust %}</p>
<p>fn solve(max_num: i32) -&gt; i32 {
    let result = max_num;
    result
}</p>
<p _="%" endhighlight="endhighlight">fn main() {
    println!("Total sum: {}", solve(10));
}</p>
<p><code>cargo run</code> simply prints out <code>Total sum: 10</code>. That's what we expect. I use <code>let result = 10;</code>
because I will be putting the result into a variable. The <code>result</code> with the semicolon
omitted is our return value. So far, so good.</p>
<p>Let's try to sum up the relevant numbers with a hard coded max value of 10.</p>
<p>{% highlight rust %}</p>
<p>fn solve(max_num: i32) -&gt; i32 {
    let numbers = range(1, max_num).filter(|i| <em>i % 3 == 0 || </em>i % 5 == 0);
    numbers.fold(0, |acc, x| acc + x)
}</p>
<p _="%" endhighlight="endhighlight">fn main() {
    println!("Total sum: {}", solve(10));
}</p>
<p>Looks fun, right? So what's going on? First we generate a range iterator of numbers
divisible by 3 and 5. Pay attention to the <code>*i</code> which we need to use because the
filter value <code>i</code> is of type <code>&amp;i32</code> and without it Rust handily tells you the same:</p>
<div class="highlight"><pre><span></span><span class="n">error</span><span class="o">:</span> <span class="n">binary</span> <span class="n">operation</span> <span class="err">`</span><span class="o">%</span><span class="err">`</span> <span class="n">cannot</span> <span class="n">be</span> <span class="n">applied</span> <span class="n">to</span> <span class="n">type</span> <span class="err">`</span><span class="o">&amp;</span><span class="n">i32</span><span class="err">`</span>
</pre></div>


<p>Next we use <code>fold</code> to sum all the entries. The <a href="http://doc.rust-lang.org/1.0.0-alpha/core/iter/trait.IteratorExt.html#method.fold">docs</a> 
explain fold like this:</p>
<div class="highlight"><pre><span></span>Performs a fold operation over the entire iterator, returning the eventual
state at the end of the iteration.
</pre></div>


<p>In this case we can liken it to Python's <code>map</code> function if you like, but a little different.
The first argument is the initial value that gets assigned to <code>acc</code>. Then the result of <code>acc + x</code>
gets assigned to <code>acc</code> to each entry <code>x</code>. Ultimately it's a <code>sum</code> in Python world.</p>
<p>Functionally we're done. The problem is solved as far as the initial requirement are concerned.
But I want to add some user input, so let's go over that part next.</p>
<p>{% highlight rust %}</p>
<p>fn solve(max_num: i32) -&gt; i32 {
    let numbers = range(1, max_num).filter(|i| <em>i % 3 == 0 || </em>i % 5 == 0);
    numbers.fold(0, |acc, x| acc + x)
}</p>
<p>fn main() {
    print!("Enter the max number: ");
    let input = std::io::stdin().read_line().ok().expect("Failed to read line");
    let input_num: Option<i32> = input.trim().parse();</p>
<div class="highlight"><pre><span></span><span class="nt">println</span><span class="o">!(</span><span class="s2">&quot;Total sum: {}&quot;</span><span class="o">,</span> <span class="nt">solve</span><span class="o">(</span><span class="nt">input_num</span><span class="o">));</span>
</pre></div>


<p _="%" endhighlight="endhighlight">}</p>
<p>We read the user input and make sure it was read ok (this is explained in detail in the book)
then we convert the input to <code>i32</code>. The <code>trim</code> is required to remove the newline char
at the nd of the input and the <code>parse</code> does the conversion.</p>
<p>But if we try to run this we get the following error:</p>
<div class="highlight"><pre><span></span><span class="n">error</span><span class="o">:</span> <span class="n">mismatched</span> <span class="n">types</span><span class="o">:</span> <span class="n">expected</span> <span class="err">`</span><span class="n">i32</span><span class="err">`</span><span class="o">,</span> <span class="n">found</span> <span class="err">`</span><span class="n">core</span><span class="o">::</span><span class="n">option</span><span class="o">::</span><span class="n">Option</span><span class="o">&lt;</span><span class="n">i32</span><span class="o">&gt;</span><span class="err">`</span> 
<span class="o">(</span><span class="n">expected</span> <span class="n">i32</span><span class="o">,</span> <span class="n">found</span> <span class="n">enum</span> <span class="n">core</span><span class="o">::</span><span class="n">option</span><span class="o">::</span><span class="n">Option</span><span class="o">)</span>
</pre></div>


<p>Right, because it's still an <code>Option&lt;i32&gt;</code> type. Helpfully the book explains that we need to 
unwrap the <code>Option</code>, and the best way to do this is with <code>match</code>:</p>
<p>{% highlight rust %}</p>
<p>fn solve(max_num: i32) -&gt; i32 {
    let numbers = range(1, max_num).filter(|i| <em>i % 3 == 0 || </em>i % 5 == 0);
    numbers.fold(0, |acc, x| acc + x)
}</p>
<p>fn main() {
    print!("Enter the max number: ");
    let input = std::io::stdin().read_line().ok().expect("Failed to read line");
    let input_num: Option<i32> = input.trim().parse();</p>
<div class="highlight"><pre><span></span><span class="nt">let</span> <span class="nt">num</span> <span class="o">=</span> <span class="nt">match</span> <span class="nt">input_num</span> <span class="p">{</span>
    <span class="n">Some</span><span class="p">(</span><span class="n">num</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="n">num</span><span class="o">,</span>
    <span class="n">None</span>      <span class="o">=&gt;</span> <span class="err">{</span>
        <span class="n">println</span><span class="o">!</span><span class="p">(</span><span class="s2">&quot;Please input a number!&quot;</span><span class="p">);</span>
        <span class="n">return</span><span class="p">;</span>
    <span class="p">}</span>
<span class="err">}</span><span class="o">;</span>

<span class="nt">println</span><span class="o">!(</span><span class="s2">&quot;Total sum: {}&quot;</span><span class="o">,</span> <span class="nt">solve</span><span class="o">(</span><span class="nt">num</span><span class="o">));</span>
</pre></div>


<p _="%" endhighlight="endhighlight">}</p>
<p>Let's run this and see what happens:</p>
<p _="%" endhighlight="endhighlight">{% highlight console %}
ninja:euler_1 unlogic$ cargo run
   Compiling euler_1 v0.0.1 (file:///work/code/rust/euler/euler_1)
/work/code/rust/euler/euler_1/src/main.rs:2:19: 2:24 warning: use of unstable item: will be replaced by range notation, #[warn(unstable)] on by default
/work/code/rust/euler/euler_1/src/main.rs:2     let numbers = range(1, max_num).filter(|i| <em>i % 3 == 0 || </em>i % 5 == 0);
                                                              ^~~~~
/work/code/rust/euler/euler_1/src/main.rs:8:34: 8:45 warning: use of unstable item, #[warn(unstable)] on by default
/work/code/rust/euler/euler_1/src/main.rs:8     let input = std::io::stdin().read_line().ok().expect("Failed to read line");
                                                                             ^~~~~~~~~~~
/work/code/rust/euler/euler_1/src/main.rs:8:17: 8:31 warning: use of unstable item, #[warn(unstable)] on by default
/work/code/rust/euler/euler_1/src/main.rs:8     let input = std::io::stdin().read_line().ok().expect("Failed to read line");
                                                            ^~~~~~~~~~~~~~
/work/code/rust/euler/euler_1/src/main.rs:9:47: 9:54 warning: use of unstable item: this method was just created, #[warn(unstable)] on by default
/work/code/rust/euler/euler_1/src/main.rs:9     let input_num: Option<i32> = input.trim().parse();
                                                                                          ^~~~~~~
     Running <code>target/euler_1</code>
Enter the max number: 1000
Total sum: 233168
ninja:euler_1 unlogic$</p>
<p>Some warnings about unstable calls, but it's an Alpha release, so what else can we expect? But the end
result is there.</p>
<p>Well that was a nice little trip into Rust land, wasn't it?</p>
<p>UPDATE: I posted this on <a href="https://www.reddit.com/r/rust/comments/2s9lam/just_started_playing_with_rust_heres_a_write_up/">reddit</a> 
and having taken some suggestions on board, I have made some small changes:</p>
<p>{% highlight rust %}
use std::iter::AdditiveIterator;</p>
<p>fn solve(max_num: i32) -&gt; i32 {
    let mut numbers = (1..max_num).filter(|i| <em>i % 3 == 0 || </em>i % 5 == 0);
    numbers.sum()
}</p>
<p>fn main() {
    print!("Enter the max number: ");
    let input = std::io::stdin().read_line().ok().expect("Failed to read line");
    let input_num: Option<i32> = input.trim().parse();</p>
<div class="highlight"><pre><span></span><span class="nt">let</span> <span class="nt">num</span> <span class="o">=</span> <span class="nt">match</span> <span class="nt">input_num</span> <span class="p">{</span>
    <span class="n">Some</span><span class="p">(</span><span class="n">num</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="n">num</span><span class="o">,</span>
    <span class="n">None</span>      <span class="o">=&gt;</span> <span class="err">{</span>
        <span class="n">println</span><span class="o">!</span><span class="p">(</span><span class="s2">&quot;Please input a number!&quot;</span><span class="p">);</span>
        <span class="n">return</span><span class="p">;</span>
    <span class="p">}</span>
<span class="err">}</span><span class="o">;</span>

<span class="nt">println</span><span class="o">!(</span><span class="s2">&quot;Total sum: {}&quot;</span><span class="o">,</span> <span class="nt">solve</span><span class="o">(</span><span class="nt">num</span><span class="o">));</span>
</pre></div>


<p _="%" endhighlight="endhighlight">}</p>
<p>Also made the code (and all future solutions) available on <a href="https://github.com/Svenito/euler_rust">Github</a></p>
    </article>

        <div class="tags">
            <p>tags: <a href="/tag/rust.html">[rust</a>, <a href="/tag/project-euler.html">project euler</a>, <a href="/tag/programming.html">programming</a>, <a href="/tag/learning.html">learning]</a>, </p>
        </div>

<hr>
<div class="sharing">
</div>
    <hr>

            </div>
        </div>
    </div>

    <hr>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <ul class="list-inline text-center">
                            <li>
                                <a href="#">
                                    <span class="fa-stack fa-lg">
                                        <i class="fa fa-circle fa-stack-2x"></i>
                                        <i class="fa fa-you can add links in your config file fa-stack-1x fa-inverse"></i>
                                    </span>
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    <span class="fa-stack fa-lg">
                                        <i class="fa fa-circle fa-stack-2x"></i>
                                        <i class="fa fa-another social link fa-stack-1x fa-inverse"></i>
                                    </span>
                                </a>
                            </li>
                    </ul>
<p class="copyright text-muted">
    Blog powered by <a href="http://getpelican.com">Pelican</a>,
    which takes great advantage of <a href="http://python.org">Python</a>.
</p>                </div>
            </div>
        </div>
    </footer>

    <!-- jQuery -->
    <script src="/theme/js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="/theme/js/bootstrap.min.js"></script>

        <!-- Custom Theme JavaScript -->
        <script src="/theme/js/clean-blog.min.js"></script>

<script type="text/javascript">
    var disqus_shortname = 'unlogic';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>

</html>